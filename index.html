<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChaosGit jitsi-meet埋め込み型</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm/css/xterm.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link rel="stylesheet" href="./css/style.css" />
</head>
<body>
    <!--場合によって変更する-->
    <iframe 
        src="https://meet.jitsi.si/ChaosGit-Test" 
        allow="camera; microphone; fullscreen"
        style="height: 700px; width: 100%; border: 0;">
    </iframe>


    <h1>会議システム</h1>
    <!-- <button id="sabotageButton">sabotage</button> -->
    <!-- <button id="open-terminal">terminal</button> -->
    <div id="jitsi-container" style="height: 720px; width: 100%;"></div>
    <div id="terminal" style="display: none;"></div>
    

    <div id="overlay" class="overlay"></div>
    <div id="popup" class="popup">
        <h2>Sabotage list</h2>
        <button id="addStrangeFileButton">不要なファイルの追加</button>
        <button id="destroyRepositoryButton">.gitディレクトリの削除</button>
        <button id="rewriteRemoteURL">リモートリポジトリのURLの書き換え（ローカル）</button>
        <button id="createBranchButton">不要なブランチの作成（ローカル）</button>
        <button id="rmRemoteBranchButton">リモートブランチの削除（リモート）</button>
        <button id="resetButton">ブランチの初期化（デバッグ用）</button>
        <button id="closePopupButton">Close</button>
    </div>

    <div id="game-container"></div>
    <script src="https://cdn.jsdelivr.net/npm/xterm/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.80.1/phaser.js"></script>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
    <script src="./js/term.js"></script>
    <script type="module" src="./js/game.js"></script>
    <script src="https://meet.jit.si/external_api.js"></script> <!--場合によって変更する-->
    <script>
    // Jitsi Meet を別ウィンドウで開く
    //const jitsiWindow = window.open("https://Test", "jitsiWindow");

    // システム側UIでボタン操作されたら、メッセージ送信
    //document.getElementById("muteBtn").addEventListener("click", () => {
    //jitsiWindow.postMessage({ action: "toggleAudio" }, "*");
    //});</script>

    <script>
        const domain = 'meet.jit.si';//場合によって変更する
        const options = {
            roomName: 'ChaosGit-Test',
            width: '100%',
            height: 720,
            parentNode: document.querySelector('#jitsi-container'),
            userInfo: {
                displayName: 'ゲストユーザ'
            }
        };
        const api = new JitsiMeetExternalAPI(domain, options);
    </script>

</body>
</html>
